<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Water Wise Comparative Analysis | Soweto vs Alexandra</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-blue: #0066cc; /* Rand Water Blue */
            --secondary-blue: #0099ff;
            --light-blue: #e6f2ff;
            --dark-blue: #004d99;
            --accent-teal: #00cccc;
            --white: #ffffff;
            --text-dark: #1a365d;
            --text-light: #f8f9fa;
            --text-medium: #2d3748;
            --glass-white: rgba(255, 255, 255, 0.12);
            --glass-border: rgba(255, 255, 255, 0.25);
            --shadow-lg: 0 25px 50px rgba(0, 102, 204, 0.15);
            --shadow-sm: 0 8px 16px rgba(0, 102, 204, 0.1);
            --transition-smooth: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0066cc 0%, #0099ff 50%, #e6f2ff 100%);
            min-height: 100vh;
            color: var(--text-dark);
            overflow-x: hidden;
            position: relative;
            line-height: 1.6;
        }

        /* Enhanced Water Animation Background */
        .water-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.4;
            background: 
                radial-gradient(circle at 20% 50%, rgba(0, 204, 204, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(0, 153, 255, 0.2) 0%, transparent 50%),
                linear-gradient(45deg, rgba(0, 102, 204, 0.1) 1px, transparent 1px),
                linear-gradient(-45deg, rgba(0, 102, 204, 0.1) 1px, transparent 1px);
            background-size: 100% 100%, 100% 100%, 60px 60px, 60px 60px;
            animation: wave 30s linear infinite;
        }

        @keyframes wave {
            0% { 
                background-position: 0 0, 0 0, 0 0, 0 0;
                transform: translateY(0) rotate(0deg);
            }
            50% { 
                transform: translateY(-20px) rotate(0.5deg);
            }
            100% { 
                background-position: 1200px 0, 1200px 0, 60px 60px, 60px 60px;
                transform: translateY(0) rotate(0deg);
            }
        }

        /* Water Droplets Animation */
        .water-droplets {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .water-drop {
            position: absolute;
            width: 15px;
            height: 15px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50% 50% 50% 0;
            transform: rotate(-45deg);
            animation: drop-fall linear infinite;
        }

        @keyframes drop-fall {
            to {
                top: 110%;
                opacity: 0;
            }
        }

        /* Main Container */
        .container-fluid {
            padding: 15px;
        }

        /* Enhanced Glassmorphism Container */
        .glass-card {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.95) 0%,
                rgba(255, 255, 255, 0.90) 100%);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 24px;
            border: 1px solid var(--glass-border);
            box-shadow: 
                inset 0 1px 0 0 rgba(255, 255, 255, 0.2),
                var(--shadow-lg);
            transition: var(--transition-smooth);
            padding: 30px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
            color: var(--text-dark);
        }

        .glass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.4), 
                transparent);
            transition: left 0.7s;
        }

        .glass-card:hover::before {
            left: 100%;
        }

        .glass-card:hover {
            transform: translateY(-8px);
            box-shadow: 
                inset 0 1px 0 0 rgba(255, 255, 255, 0.3),
                0 30px 60px rgba(0, 102, 204, 0.25);
            border-color: rgba(255, 255, 255, 0.4);
        }

        /* Enhanced Navigation Tabs */
        .nav-tabs {
            border: none;
            margin-bottom: 40px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .nav-tabs .nav-link {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.95) 0%,
                rgba(255, 255, 255, 0.90) 100%);
            backdrop-filter: blur(10px);
            border: 2px solid var(--glass-border);
            color: var(--dark-blue) !important;
            border-radius: 50px;
            margin: 8px;
            padding: 14px 28px;
            font-weight: 600;
            font-size: 1rem;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            min-width: 160px;
        }

        .nav-tabs .nav-link i {
            color: var(--dark-blue) !important;
        }

        .nav-tabs .nav-link:hover {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.98) 0%,
                rgba(255, 255, 255, 0.95) 100%);
            transform: translateY(-4px) scale(1.05);
            border-color: rgba(0, 102, 204, 0.4);
            box-shadow: 0 10px 25px rgba(0, 102, 204, 0.2);
            color: var(--dark-blue) !important;
        }

        .nav-tabs .nav-link.active {
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-teal));
            border: none;
            color: white !important;
            box-shadow: 
                0 5px 15px rgba(0, 102, 204, 0.3),
                inset 0 1px 0 0 rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .nav-tabs .nav-link.active i {
            color: white !important;
        }

        .nav-tabs .nav-link.active::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.4), 
                transparent);
            animation: shimmer 2s infinite;
        }

        /* Text Color Fixes */
        h1, h2, h3, h4, h5, h6 {
            color: var(--text-dark);
            font-weight: 600;
            line-height: 1.3;
        }

        .text-light {
            color: var(--text-dark) !important;
        }

        .text-muted {
            color: #666 !important;
        }

        /* Enhanced Comparison Cards */
        .comparison-card {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.95) 0%,
                rgba(255, 255, 255, 0.90) 100%);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 28px;
            margin-bottom: 28px;
            border: 1px solid var(--glass-border);
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
            color: var(--text-dark);
        }

        .comparison-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
            transition: left 0.6s;
        }

        .comparison-card:hover::before {
            left: 100%;
        }

        .comparison-card:hover {
            transform: translateY(-6px) scale(1.02);
            box-shadow: 
                inset 0 1px 0 0 rgba(255, 255, 255, 0.2),
                0 20px 40px rgba(0, 102, 204, 0.2);
            border-color: rgba(0, 102, 204, 0.3);
        }

        .soweto-highlight {
            border-left: 6px solid var(--primary-blue);
            background: linear-gradient(90deg, 
                rgba(0, 102, 204, 0.08) 0%,
                rgba(0, 102, 204, 0.04) 30%,
                rgba(255, 255, 255, 0.95) 100%);
        }

        .alexandra-highlight {
            border-left: 6px solid #2e8b57;
            background: linear-gradient(90deg, 
                rgba(46, 139, 87, 0.08) 0%,
                rgba(46, 139, 87, 0.04) 30%,
                rgba(255, 255, 255, 0.95) 100%);
        }

        /* Enhanced Stat Cards */
        .stat-card {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.98) 0%,
                rgba(255, 255, 255, 0.95) 100%);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            transition: var(--transition-smooth);
            border: 1px solid rgba(0, 102, 204, 0.1);
            position: relative;
            overflow: hidden;
            height: 100%;
            color: var(--text-dark);
        }

        .stat-card::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-blue), var(--accent-teal));
            transition: height 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px) scale(1.03);
            border-color: rgba(0, 102, 204, 0.3);
            box-shadow: 0 15px 35px rgba(0, 102, 204, 0.15);
        }

        .stat-card:hover::after {
            height: 6px;
        }

        .stat-number {
            font-size: 3rem;
            font-weight: 800;
            margin: 15px 0;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(0, 102, 204, 0.1);
            font-variant-numeric: tabular-nums;
        }

        .stat-label {
            font-size: 0.95rem;
            color: var(--text-medium);
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        /* Enhanced Charts Container */
        .chart-container {
            position: relative;
            height: 320px;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 18px;
            padding: 25px;
            margin: 25px 0;
            transition: var(--transition-smooth);
            border: 1px solid rgba(0, 102, 204, 0.1);
        }

        .chart-container:hover {
            background: rgba(255, 255, 255, 0.98);
            transform: translateY(-4px);
            border-color: rgba(0, 102, 204, 0.2);
            box-shadow: 0 15px 35px rgba(0, 102, 204, 0.15);
        }

        /* Enhanced Progress Bars */
        .progress-container {
            margin: 25px 0;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--text-dark);
            font-size: 0.95rem;
        }

        .progress {
            height: 12px;
            background: rgba(0, 102, 204, 0.1);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .progress-bar {
            border-radius: 10px;
            transition: width 1.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.4), 
                transparent);
            animation: shimmer 2s infinite;
        }

        /* Enhanced Recommendation Cards */
        .recommendation-card {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.95) 0%,
                rgba(255, 255, 255, 0.90) 100%);
            backdrop-filter: blur(10px);
            border-radius: 18px;
            padding: 25px;
            margin: 18px 0;
            border: 1px solid rgba(0, 102, 204, 0.1);
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
            color: var(--text-dark);
        }

        .recommendation-card:hover {
            transform: translateX(12px);
            border-color: rgba(0, 102, 204, 0.3);
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.98) 0%,
                rgba(255, 255, 255, 0.95) 100%);
            box-shadow: 0 10px 30px rgba(0, 102, 204, 0.15);
        }

        /* Enhanced Timeline */
        .timeline {
            position: relative;
            padding-left: 35px;
            color: var(--text-dark);
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(to bottom, 
                var(--primary-blue) 0%,
                var(--accent-teal) 100%);
            border-radius: 3px;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 35px;
            padding-left: 20px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -40px;
            top: 8px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--primary-blue);
            border: 3px solid var(--white);
            box-shadow: 0 0 0 3px var(--primary-blue);
            z-index: 2;
            transition: var(--transition-smooth);
        }

        .timeline-item:hover::before {
            transform: scale(1.3);
            box-shadow: 0 0 0 5px var(--primary-blue);
        }

        .timeline-item.alexandra::before {
            background: #2e8b57;
            box-shadow: 0 0 0 3px #2e8b57;
        }

        .timeline-item.alexandra:hover::before {
            box-shadow: 0 0 0 5px #2e8b57;
        }

        /* Enhanced Header */
        .main-header {
            text-align: center;
            padding: 50px 25px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.95) 0%,
                rgba(255, 255, 255, 0.90) 100%);
            backdrop-filter: blur(15px);
            border-radius: 0 0 50px 50px;
            margin-bottom: 40px;
            border-bottom: 2px solid rgba(0, 102, 204, 0.2);
            position: relative;
            overflow: hidden;
            color: var(--text-dark);
        }

        .main-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.3), 
                transparent);
            animation: header-shimmer 8s infinite;
        }

        @keyframes header-shimmer {
            0% { left: -100%; }
            50% { left: 100%; }
            100% { left: 100%; }
        }

        .main-header h1 {
            font-size: 3.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--dark-blue), var(--primary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            text-shadow: 0 2px 10px rgba(0, 102, 204, 0.1);
        }

        .main-header p {
            font-size: 1.3rem;
            color: var(--text-medium);
            opacity: 0.95;
            max-width: 850px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Enhanced Footer */
        .footer {
            text-align: center;
            padding: 40px;
            margin-top: 60px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.95) 0%,
                rgba(255, 255, 255, 0.90) 100%);
            backdrop-filter: blur(15px);
            border-radius: 30px;
            border-top: 2px solid rgba(0, 102, 204, 0.2);
            font-size: 0.95rem;
            color: var(--text-dark);
            transition: var(--transition-smooth);
        }

        .footer:hover {
            border-color: rgba(0, 102, 204, 0.3);
            box-shadow: 0 10px 30px rgba(0, 102, 204, 0.15);
        }

        /* Enhanced Badge */
        .badge.bg-gradient {
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-teal));
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 12px 28px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 50px;
            box-shadow: 0 5px 15px rgba(0, 102, 204, 0.2);
            transition: var(--transition-smooth);
            color: white !important;
        }

        .badge.bg-gradient:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 102, 204, 0.3);
        }

        /* Enhanced Quote Styling */
        .quote {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.95) 0%,
                rgba(255, 255, 255, 0.90) 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid var(--accent-teal);
            font-style: italic;
            transition: var(--transition-smooth);
            color: var(--text-dark);
        }

        .quote:hover {
            transform: translateX(5px);
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.98) 0%,
                rgba(255, 255, 255, 0.95) 100%);
        }

        /* Enhanced Alert */
        .alert {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.95) 0%,
                rgba(255, 255, 255, 0.90) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 102, 204, 0.2);
            border-radius: 15px;
            color: var(--text-dark);
        }

        .alert i {
            color: var(--primary-blue);
        }

        /* Enhanced Button */
        .btn-outline-light {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.95) 0%,
                rgba(255, 255, 255, 0.90) 100%);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(0, 102, 204, 0.3);
            color: var(--dark-blue) !important;
            padding: 10px 25px;
            border-radius: 50px;
            font-weight: 600;
            transition: var(--transition-smooth);
        }

        .btn-outline-light i {
            color: var(--dark-blue) !important;
        }

        .btn-outline-light:hover {
            background: linear-gradient(135deg, 
                var(--primary-blue) 0%,
                var(--secondary-blue) 100%);
            transform: translateY(-3px);
            border-color: var(--primary-blue);
            box-shadow: 0 8px 20px rgba(0, 102, 204, 0.2);
            color: white !important;
        }

        .btn-outline-light:hover i {
            color: white !important;
        }

        /* Enhanced Table */
        .table-dark {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.95) 0%,
                rgba(255, 255, 255, 0.90) 100%);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            overflow: hidden;
            color: var(--text-dark);
        }

        .table-dark th {
            background: linear-gradient(135deg, 
                rgba(0, 102, 204, 0.2) 0%,
                rgba(0, 153, 255, 0.15) 100%);
            border-color: rgba(0, 102, 204, 0.2);
            color: var(--dark-blue);
            font-weight: 600;
        }

        .table-dark td {
            border-color: rgba(0, 102, 204, 0.1);
            color: var(--text-medium);
            transition: all 0.3s ease;
        }

        .table-dark tr:hover td {
            background: rgba(0, 102, 204, 0.05);
            transform: translateX(5px);
        }

        /* List Group Items */
        .list-group-item {
            background: transparent;
            border-color: rgba(0, 102, 204, 0.1);
            color: var(--text-dark);
        }

        .list-group-item i {
            color: var(--primary-blue);
        }

        /* Alert Colors */
        .bg-warning.bg-opacity-10 {
            background-color: rgba(255, 193, 7, 0.1) !important;
        }

        .border-warning {
            border-color: rgba(255, 193, 7, 0.3) !important;
        }

        .bg-danger.bg-opacity-10 {
            background-color: rgba(220, 53, 69, 0.1) !important;
        }

        .bg-info.bg-opacity-10 {
            background-color: rgba(23, 162, 184, 0.1) !important;
        }

        .bg-success.bg-opacity-10 {
            background-color: rgba(40, 167, 69, 0.1) !important;
        }

        .bg-primary.bg-opacity-10 {
            background-color: rgba(0, 102, 204, 0.1) !important;
        }

        /* Animation */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .animate-fade-in {
            animation: fadeInUp 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* Mobile Responsive Enhancements */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .water-bg {
                background-size: 100% 100%, 100% 100%, 30px 30px, 30px 30px;
                animation: wave 60s linear infinite;
            }

            .main-header {
                padding: 30px 15px;
                border-radius: 0 0 30px 30px;
                margin-bottom: 25px;
            }

            .main-header h1 {
                font-size: 2rem;
                margin-bottom: 10px;
                background: linear-gradient(135deg, var(--dark-blue), var(--primary-blue));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
            }

            .main-header p {
                font-size: 1.1rem;
                padding: 0 10px;
                color: var(--text-medium);
            }

            .nav-tabs {
                margin-bottom: 25px;
            }

            .nav-tabs .nav-link {
                width: calc(50% - 16px);
                min-width: auto;
                margin: 6px;
                padding: 12px 15px;
                font-size: 0.9rem;
                color: var(--dark-blue) !important;
                background: linear-gradient(135deg, 
                    rgba(255, 255, 255, 0.98) 0%,
                    rgba(255, 255, 255, 0.95) 100%);
                border: 2px solid rgba(0, 102, 204, 0.2);
            }

            .nav-tabs .nav-link i {
                color: var(--dark-blue) !important;
            }

            .nav-tabs .nav-link:hover {
                background: linear-gradient(135deg, 
                    rgba(255, 255, 255, 0.98) 0%,
                    rgba(255, 255, 255, 0.95) 100%);
                border-color: rgba(0, 102, 204, 0.3);
                color: var(--dark-blue) !important;
            }

            .nav-tabs .nav-link.active {
                background: linear-gradient(135deg, var(--primary-blue), var(--accent-teal));
                color: white !important;
            }

            .nav-tabs .nav-link.active i {
                color: white !important;
            }

            .glass-card {
                padding: 20px;
                margin-bottom: 20px;
                border-radius: 20px;
                background: rgba(255, 255, 255, 0.98);
                color: var(--text-dark);
            }

            .comparison-card {
                padding: 20px;
                margin-bottom: 20px;
                background: rgba(255, 255, 255, 0.98);
                color: var(--text-dark);
            }

            .stat-card {
                padding: 20px;
                margin-bottom: 15px;
                background: rgba(255, 255, 255, 0.98);
                color: var(--text-dark);
            }

            .stat-number {
                font-size: 2.2rem;
                margin: 10px 0;
                background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
                -webkit-background-clip: text;
            }

            .stat-label {
                color: var(--text-medium);
            }

            .chart-container {
                height: 280px;
                padding: 20px;
                margin: 20px 0;
                background: rgba(255, 255, 255, 0.98);
            }

            .col-md-6, .col-lg-6, .col-md-4, .col-md-3 {
                padding-left: 8px;
                padding-right: 8px;
            }

            .row {
                margin-left: -8px;
                margin-right: -8px;
            }

            .footer {
                padding: 25px 15px;
                margin-top: 40px;
                border-radius: 20px;
                background: rgba(255, 255, 255, 0.98);
                color: var(--text-dark);
            }

            .badge.bg-gradient {
                padding: 10px 20px;
                font-size: 0.9rem;
                color: white !important;
            }

            .timeline {
                padding-left: 25px;
                color: var(--text-dark);
            }

            .timeline-item::before {
                left: -30px;
                width: 14px;
                height: 14px;
            }

            /* Stack columns vertically on mobile */
            .col-md-6 {
                width: 100%;
                margin-bottom: 20px;
            }

            .col-md-4, .col-md-3 {
                width: 50%;
                margin-bottom: 15px;
            }

            /* Adjust text sizes and colors */
            h1, .h1 { 
                font-size: 1.8rem !important; 
                color: var(--dark-blue);
            }
            h2, .h2 { 
                font-size: 1.6rem !important; 
                color: var(--dark-blue);
            }
            h3, .h3 { 
                font-size: 1.4rem !important; 
                color: var(--dark-blue);
            }
            h4, .h4 { 
                font-size: 1.2rem !important; 
                color: var(--dark-blue);
            }
            h5, .h5 { 
                font-size: 1.1rem !important; 
                color: var(--dark-blue);
            }
            
            .lead {
                font-size: 1rem;
                color: var(--text-medium);
            }

            /* Button colors on mobile */
            .btn-outline-light {
                background: rgba(255, 255, 255, 0.95);
                color: var(--dark-blue) !important;
                border-color: rgba(0, 102, 204, 0.3);
            }

            .btn-outline-light i {
                color: var(--dark-blue) !important;
            }

            .btn-outline-light:hover {
                background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
                color: white !important;
            }

            .btn-outline-light:hover i {
                color: white !important;
            }

            /* Table colors on mobile */
            .table-dark {
                background: rgba(255, 255, 255, 0.95);
                color: var(--text-dark);
            }

            .table-dark th {
                color: var(--dark-blue);
                background: rgba(0, 102, 204, 0.1);
            }

            .table-dark td {
                color: var(--text-medium);
            }

            /* Alert colors on mobile */
            .alert {
                background: rgba(255, 255, 255, 0.95);
                color: var(--text-dark);
            }
        }

        @media (max-width: 576px) {
            .container-fluid {
                padding-left: 10px;
                padding-right: 10px;
            }

            .nav-tabs .nav-link {
                width: 100%;
                margin: 5px 0;
                justify-content: center;
                color: var(--dark-blue) !important;
                background: rgba(255, 255, 255, 0.95);
            }

            .nav-tabs .nav-link.active {
                color: white !important;
                background: linear-gradient(135deg, var(--primary-blue), var(--accent-teal));
            }

            .main-header h1 {
                font-size: 1.6rem;
                background: linear-gradient(135deg, var(--dark-blue), var(--primary-blue));
                -webkit-background-clip: text;
            }

            .main-header p {
                font-size: 1rem;
                color: var(--text-medium);
            }

            .glass-card {
                padding: 15px;
                background: rgba(255, 255, 255, 0.98);
            }

            .chart-container {
                height: 250px;
                padding: 15px;
                background: rgba(255, 255, 255, 0.98);
            }

            .col-md-4, .col-md-3 {
                width: 100%;
            }

            .stat-number {
                font-size: 1.8rem;
                background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
                -webkit-background-clip: text;
            }

            .footer {
                padding: 20px 10px;
                background: rgba(255, 255, 255, 0.98);
                color: var(--text-dark);
            }

            .table-responsive {
                font-size: 0.85rem;
            }

            .btn-outline-light {
                width: 100%;
                margin-bottom: 10px;
                color: var(--dark-blue) !important;
                background: rgba(255, 255, 255, 0.95);
            }

            /* Single column layout for very small screens */
            .row > div {
                width: 100% !important;
            }
        }

        @media (max-width: 400px) {
            .main-header {
                padding: 20px 10px;
            }

            .glass-card {
                padding: 12px;
                background: rgba(255, 255, 255, 0.98);
            }

            .chart-container {
                height: 220px;
                padding: 12px;
                background: rgba(255, 255, 255, 0.98);
            }

            .stat-card {
                padding: 15px;
                background: rgba(255, 255, 255, 0.98);
            }

            .badge.bg-gradient {
                padding: 8px 16px;
                font-size: 0.8rem;
                color: white !important;
            }

            /* Ensure all text is visible */
            * {
                color: var(--text-dark) !important;
            }
        }

        /* Landscape Mode */
        @media (max-height: 600px) and (orientation: landscape) {
            .main-header {
                padding: 20px;
            }

            .glass-card {
                padding: 15px;
            }

            .chart-container {
                height: 200px;
            }

            /* Ensure text visibility in landscape */
            body {
                color: var(--text-dark);
            }
        }

        /* High contrast mode for accessibility */
        @media (prefers-contrast: high) {
            :root {
                --text-dark: #000000;
                --text-medium: #333333;
            }

            .glass-card {
                background: white;
                border: 2px solid var(--primary-blue);
            }

            .stat-card {
                background: white;
                border: 2px solid var(--primary-blue);
            }
        }

        /* Print styles */
        @media print {
            .water-bg, .water-droplets, .nav-tabs {
                display: none !important;
            }

            body {
                background: white !important;
                color: black !important;
            }

            .glass-card, .comparison-card, .stat-card {
                background: white !important;
                border: 1px solid #ddd !important;
                box-shadow: none !important;
                color: black !important;
                break-inside: avoid;
            }

            .stat-number {
                background: black !important;
                -webkit-background-clip: text;
                -webkit-text-fill-color: black;
            }

            .footer {
                background: white !important;
                color: black !important;
                border: 1px solid #ddd !important;
            }
        }

        /* Enhanced hover effects for interactive elements */
        .interactive-element {
            cursor: pointer;
            transition: var(--transition-smooth);
        }

        .interactive-element:hover {
            transform: translateY(-2px);
        }

        /* Loading animation */
        .loading {
            position: relative;
            overflow: hidden;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
            animation: shimmer 1.5s infinite;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 102, 204, 0.1);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-teal));
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--secondary-blue), var(--accent-teal));
        }

        /* Ensure all text elements have proper color */
        p, span, div, li, td, th, .small, .text-muted {
            color: var(--text-medium) !important;
        }

        /* Fix for bootstrap text-light class */
        .text-light {
            color: var(--text-dark) !important;
        }

        /* Fix for badge text */
        .badge {
            color: white !important;
        }
    </style>
</head>
<body>
    <!-- Water Background -->
    <div class="water-bg"></div>

    <!-- Main Container -->
    <div class="container-fluid py-4 px-3 px-md-5">
        
        <!-- Header -->
        <div class="main-header animate-fade-in">
            <h1><i class="fas fa-tint"></i> Water Wise Comparative Analysis</h1>
            <p>Soweto vs Alexandra | 2025 Outreach Data Analysis</p>
            <div class="badge bg-gradient px-4 py-2 mt-3" style="background: linear-gradient(135deg, var(--soweto-blue), var(--alexandra-green));">
                <i class="fas fa-database me-2"></i>360 Participants Analyzed
            </div>
        </div>

        <!-- Navigation Tabs -->
        <ul class="nav nav-tabs justify-content-center" id="analysisTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="comparison-tab" data-bs-toggle="tab" data-bs-target="#comparison" type="button" role="tab">
                    <i class="fas fa-balance-scale"></i> Comparison
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="soweto-tab" data-bs-toggle="tab" data-bs-target="#soweto" type="button" role="tab">
                    <i class="fas fa-map-marker-alt" style="color: var(--soweto-blue);"></i> Soweto Report
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="alexandra-tab" data-bs-toggle="tab" data-bs-target="#alexandra" type="button" role="tab">
                    <i class="fas fa-map-marker-alt" style="color: var(--alexandra-green);"></i> Alexandra Report
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="recommendations-tab" data-bs-toggle="tab" data-bs-target="#recommendations" type="button" role="tab">
                    <i class="fas fa-lightbulb"></i> Recommendations
                </button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content" id="analysisTabContent">
            
            <!-- Comparison Tab -->
            <div class="tab-pane fade show active" id="comparison" role="tabpanel">
                <div class="row">
                    <!-- Key Stats Comparison -->
                    <div class="col-12 mb-4">
                        <div class="glass-card animate-fade-in" style="animation-delay: 0.1s;">
                            <h3 class="mb-4"><i class="fas fa-chart-line me-2"></i>Key Statistics Comparison</h3>
                            <div class="row">
                                <div class="col-md-3 col-6 mb-3">
                                    <div class="stat-card">
                                        <div class="stat-label">Total Participants</div>
                                        <div class="stat-number">360</div>
                                        <div class="small">Combined Analysis</div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-6 mb-3">
                                    <div class="stat-card">
                                        <div class="stat-label">Soweto Concern</div>
                                        <div class="stat-number" style="color: var(--soweto-blue);">80%</div>
                                        <div class="small">Water Concern Level</div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-6 mb-3">
                                    <div class="stat-card">
                                        <div class="stat-label">Alexandra Concern</div>
                                        <div class="stat-number" style="color: var(--alexandra-green);">72%</div>
                                        <div class="small">Very Concerned</div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-6 mb-3">
                                    <div class="stat-card">
                                        <div class="stat-label">Workshop Interest</div>
                                        <div class="stat-number">80%</div>
                                        <div class="small">Average Both Areas</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quantitative Comparison Charts -->
                    <div class="col-lg-6 mb-4">
                        <div class="glass-card animate-fade-in" style="animation-delay: 0.2s;">
                            <h4 class="mb-4"><i class="fas fa-chart-bar me-2"></i>Infrastructure Ratings</h4>
                            <div class="chart-container">
                                <canvas id="infrastructureComparisonChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6 mb-4">
                        <div class="glass-card animate-fade-in" style="animation-delay: 0.3s;">
                            <h4 class="mb-4"><i class="fas fa-chart-pie me-2"></i>Education Levels</h4>
                            <div class="chart-container">
                                <canvas id="educationComparisonChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Qualitative Insights -->
                    <div class="col-12 mb-4">
                        <div class="glass-card animate-fade-in" style="animation-delay: 0.4s;">
                            <h3 class="mb-4"><i class="fas fa-comments me-2"></i>Qualitative Insights Comparison</h3>
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="comparison-card soweto-highlight">
                                        <h5 class="mb-3" style="color: var(--soweto-blue);">
                                            <i class="fas fa-map-marker-alt me-2"></i>Soweto Community Voices
                                        </h5>
                                        <div class="quote mb-3">
                                            <i class="fas fa-quote-left text-muted me-2"></i>
                                            "We don't know when water will go. No one tells us."
                                            <i class="fas fa-quote-right text-muted ms-2"></i>
                                        </div>
                                        <div class="quote mb-3">
                                            <i class="fas fa-quote-left text-muted me-2"></i>
                                            "Our meter doesn't work, and no one comes to fix it."
                                            <i class="fas fa-quote-right text-muted ms-2"></i>
                                        </div>
                                        <div class="progress-container">
                                            <div class="progress-label">
                                                <span>Communication Gap</span>
                                                <span>85%</span>
                                            </div>
                                            <div class="progress">
                                                <div class="progress-bar" style="width: 85%; background: var(--soweto-blue);"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-4">
                                    <div class="comparison-card alexandra-highlight">
                                        <h5 class="mb-3" style="color: var(--alexandra-green);">
                                            <i class="fas fa-map-marker-alt me-2"></i>Alexandra Community Voices
                                        </h5>
                                        <div class="quote mb-3">
                                            <i class="fas fa-quote-left text-muted me-2"></i>
                                            "When it rains, there is no drainage system for water to go."
                                            <i class="fas fa-quote-right text-muted ms-2"></i>
                                        </div>
                                        <div class="quote mb-3">
                                            <i class="fas fa-quote-left text-muted me-2"></i>
                                            "All toilets in the yard are blocked and throwing waste everywhere."
                                            <i class="fas fa-quote-right text-muted ms-2"></i>
                                        </div>
                                        <div class="progress-container">
                                            <div class="progress-label">
                                                <span>Drainage Issues</span>
                                                <span>58%</span>
                                            </div>
                                            <div class="progress">
                                                <div class="progress-bar" style="width: 58%; background: var(--alexandra-green);"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Issue Comparison -->
                    <div class="col-12">
                        <div class="glass-card animate-fade-in" style="animation-delay: 0.5s;">
                            <h3 class="mb-4"><i class="fas fa-exclamation-triangle me-2"></i>Top Issues Comparison</h3>
                            <div class="chart-container">
                                <canvas id="issuesComparisonChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Soweto Report Tab -->
            <div class="tab-pane fade" id="soweto" role="tabpanel">
                <div class="row">
                    <div class="col-12 mb-4">
                        <div class="glass-card" style="border-left: 5px solid var(--soweto-blue);">
                            <h2 class="mb-4" style="color: var(--soweto-blue);">
                                <i class="fas fa-map-marker-alt me-2"></i>Soweto Water Wise Report
                            </h2>
                            <p class="lead">292 Participants | Multi-day Outreach | Summit Completion</p>
                        </div>
                    </div>

                    <!-- Soweto Stats -->
                    <div class="col-md-4 mb-4">
                        <div class="stat-card" style="border-top: 4px solid var(--soweto-blue);">
                            <i class="fas fa-users fa-2x mb-3" style="color: var(--soweto-blue);"></i>
                            <div class="stat-number" style="color: var(--soweto-blue);">292</div>
                            <div class="stat-label">Total Participants</div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="stat-card" style="border-top: 4px solid var(--soweto-blue);">
                            <i class="fas fa-water fa-2x mb-3" style="color: var(--soweto-blue);"></i>
                            <div class="stat-number" style="color: var(--soweto-blue);">80%</div>
                            <div class="stat-label">Water Concern</div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="stat-card" style="border-top: 4px solid var(--soweto-blue);">
                            <i class="fas fa-graduation-cap fa-2x mb-3" style="color: var(--soweto-blue);"></i>
                            <div class="stat-number" style="color: var(--soweto-blue);">78%</div>
                            <div class="stat-label">Workshop Interest</div>
                        </div>
                    </div>

                    <!-- Soweto Charts -->
                    <div class="col-lg-6 mb-4">
                        <div class="glass-card">
                            <h4 class="mb-4">Household Composition</h4>
                            <div class="chart-container">
                                <canvas id="sowetoHouseholdChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6 mb-4">
                        <div class="glass-card">
                            <h4 class="mb-4">Water Shortage Frequency</h4>
                            <div class="chart-container">
                                <canvas id="sowetoShortageChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Soweto Qualitative -->
                    <div class="col-12 mb-4">
                        <div class="glass-card">
                            <h4 class="mb-4">Key Challenges Identified</h4>
                            <div class="row">
                                <div class="col-md-6">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item bg-transparent text-light">
                                            <i class="fas fa-bullhorn text-warning me-2"></i>
                                            <strong>Lack of Communication:</strong> 85% report no outage information
                                        </li>
                                        <li class="list-group-item bg-transparent text-light">
                                            <i class="fas fa-tachometer-alt text-danger me-2"></i>
                                            <strong>Non-functional Meters:</strong> 40% of meters not working
                                        </li>
                                        <li class="list-group-item bg-transparent text-light">
                                            <i class="fas fa-recycle text-info me-2"></i>
                                            <strong>Greywater Reliance:</strong> Regular use during shortages
                                        </li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item bg-transparent text-light">
                                            <i class="fas fa-question-circle text-primary me-2"></i>
                                            <strong>Reporting Knowledge Gap:</strong> 60% don't know how to report
                                        </li>
                                        <li class="list-group-item bg-transparent text-light">
                                            <i class="fas fa-phone-slash text-secondary me-2"></i>
                                            <strong>Local Preference:</strong> Prefer community offices over phone
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Alexandra Report Tab -->
            <div class="tab-pane fade" id="alexandra" role="tabpanel">
                <div class="row">
                    <div class="col-12 mb-4">
                        <div class="glass-card" style="border-left: 5px solid var(--alexandra-green);">
                            <h2 class="mb-4" style="color: var(--alexandra-green);">
                                <i class="fas fa-map-marker-alt me-2"></i>Alexandra Water Wise Report
                            </h2>
                            <p class="lead">68 Household Surveys | Extended Analysis | October-December 2025</p>
                        </div>
                    </div>

                    <!-- Alexandra Stats -->
                    <div class="col-md-3 col-6 mb-4">
                        <div class="stat-card" style="border-top: 4px solid var(--alexandra-green);">
                            <div class="stat-number" style="color: var(--alexandra-green);">68</div>
                            <div class="stat-label">Household Surveys</div>
                        </div>
                    </div>
                    <div class="col-md-3 col-6 mb-4">
                        <div class="stat-card" style="border-top: 4px solid var(--alexandra-green);">
                            <div class="stat-number" style="color: var(--alexandra-green);">58%</div>
                            <div class="stat-label">Drainage Issues</div>
                        </div>
                    </div>
                    <div class="col-md-3 col-6 mb-4">
                        <div class="stat-card" style="border-top: 4px solid var(--alexandra-green);">
                            <div class="stat-number" style="color: var(--alexandra-green);">52%</div>
                            <div class="stat-label">Sewer Blockages</div>
                        </div>
                    </div>
                    <div class="col-md-3 col-6 mb-4">
                        <div class="stat-card" style="border-top: 4px solid var(--alexandra-green);">
                            <div class="stat-number" style="color: var(--alexandra-green);">82%</div>
                            <div class="stat-label">Workshop Interest</div>
                        </div>
                    </div>

                    <!-- Alexandra Charts -->
                    <div class="col-lg-6 mb-4">
                        <div class="glass-card">
                            <h4 class="mb-4">Infrastructure Crisis</h4>
                            <div class="chart-container">
                                <canvas id="alexandraInfrastructureChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6 mb-4">
                        <div class="glass-card">
                            <h4 class="mb-4">Major Issues Reported</h4>
                            <div class="chart-container">
                                <canvas id="alexandraIssuesChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Alexandra Qualitative -->
                    <div class="col-12 mb-4">
                        <div class="glass-card">
                            <h4 class="mb-4">Emergency Infrastructure Failures</h4>
                            <div class="alert alert-warning bg-warning bg-opacity-10 border-warning">
                                <i class="fas fa-exclamation-triangle me-2"></i>
                                <strong>CRITICAL FINDING:</strong> 68% rate water infrastructure as "Poor" or "Very Poor"
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-4 mb-3">
                                    <div class="p-3 bg-danger bg-opacity-10 rounded">
                                        <i class="fas fa-flood fa-2x text-danger mb-2"></i>
                                        <h6>Drainage Collapse</h6>
                                        <small>58% report flooding issues during rains</small>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="p-3 bg-warning bg-opacity-10 rounded">
                                        <i class="fas fa-toilet fa-2x text-warning mb-2"></i>
                                        <h6>Sewer Emergency</h6>
                                        <small>52% report blocked toilets and overflows</small>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="p-3 bg-info bg-opacity-10 rounded">
                                        <i class="fas fa-trash fa-2x text-info mb-2"></i>
                                        <h6>Pollution Crisis</h6>
                                        <small>48% report serious pollution from littering</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recommendations Tab -->
            <div class="tab-pane fade" id="recommendations" role="tabpanel">
                <div class="row">
                    <div class="col-12 mb-4">
                        <div class="glass-card">
                            <h2 class="mb-4"><i class="fas fa-lightbulb me-2"></i>Strategic Recommendations</h2>
                            <p class="lead">Evidence-based interventions for Soweto & Alexandra</p>
                        </div>
                    </div>

                    <!-- Timeline -->
                    <div class="col-lg-6 mb-4">
                        <div class="glass-card">
                            <h4 class="mb-4"><i class="fas fa-calendar-alt me-2"></i>Implementation Timeline</h4>
                            <div class="timeline">
                                <div class="timeline-item">
                                    <h5>Phase 1: Emergency Response (1-3 months)</h5>
                                    <p class="text-muted">Address critical infrastructure failures in Alexandra</p>
                                </div>
                                <div class="timeline-item alexandra">
                                    <h5>Phase 2: Communication Systems (3-6 months)</h5>
                                    <p class="text-muted">Implement SMS alerts and reporting apps</p>
                                </div>
                                <div class="timeline-item">
                                    <h5>Phase 3: Community Training (6-9 months)</h5>
                                    <p class="text-muted">Workshops and maintenance team development</p>
                                </div>
                                <div class="timeline-item alexandra">
                                    <h5>Phase 4: Sustainability (9-12 months)</h5>
                                    <p class="text-muted">Long-term maintenance and monitoring</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Priority Matrix -->
                    <div class="col-lg-6 mb-4">
                        <div class="glass-card">
                            <h4 class="mb-4"><i class="fas fa-tasks me-2"></i>Priority Action Matrix</h4>
                            <div class="table-responsive">
                                <table class="table table-dark table-hover">
                                    <thead>
                                        <tr>
                                            <th>Priority</th>
                                            <th>Soweto Focus</th>
                                            <th>Alexandra Focus</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><span class="badge bg-danger">CRITICAL</span></td>
                                            <td>Meter Communication</td>
                                            <td>Drainage Emergency</td>
                                        </tr>
                                        <tr>
                                            <td><span class="badge bg-warning">HIGH</span></td>
                                            <td>Reporting System</td>
                                            <td>Sewer Rehabilitation</td>
                                        </tr>
                                        <tr>
                                            <td><span class="badge bg-info">MEDIUM</span></td>
                                            <td>Greywater Education</td>
                                            <td>Pollution Control</td>
                                        </tr>
                                        <tr>
                                            <td><span class="badge bg-success">LOW</span></td>
                                            <td>Workshop Expansion</td>
                                            <td>Maintenance Teams</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Specific Recommendations -->
                    <div class="col-md-6 mb-4">
                        <div class="recommendation-card">
                            <h5 style="color: var(--soweto-blue);">
                                <i class="fas fa-map-marker-alt me-2"></i>Soweto-Specific
                            </h5>
                            <ul class="list-unstyled mt-3">
                                <li class="mb-2">
                                    <i class="fas fa-check-circle text-success me-2"></i>
                                    <strong>SMS Alert System</strong> for outage communication
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check-circle text-success me-2"></i>
                                    <strong>Meter Maintenance Program</strong>
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check-circle text-success me-2"></i>
                                    <strong>Local Community Reporting Office</strong>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="col-md-6 mb-4">
                        <div class="recommendation-card">
                            <h5 style="color: var(--alexandra-green);">
                                <i class="fas fa-map-marker-alt me-2"></i>Alexandra-Specific
                            </h5>
                            <ul class="list-unstyled mt-3">
                                <li class="mb-2">
                                    <i class="fas fa-check-circle text-success me-2"></i>
                                    <strong>Emergency Drainage Repair Program</strong>
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check-circle text-success me-2"></i>
                                    <strong>Sewer System Rehabilitation</strong>
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check-circle text-success me-2"></i>
                                    <strong>Anti-Littering & Pollution Control</strong>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Future Recommendations -->
                    <div class="col-12 mb-4">
                        <div class="glass-card">
                            <h4 class="mb-4"><i class="fas fa-rocket me-2"></i>Future Program Development</h4>
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="p-3 bg-primary bg-opacity-10 rounded h-100">
                                        <i class="fas fa-mobile-alt fa-2x text-primary mb-2"></i>
                                        <h6>Digital Integration</h6>
                                        <small class="text-muted">"Report Leaks" app with GIS mapping</small>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="p-3 bg-success bg-opacity-10 rounded h-100">
                                        <i class="fas fa-users fa-2x text-success mb-2"></i>
                                        <h6>Community Empowerment</h6>
                                        <small class="text-muted">Local maintenance teams & training</small>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="p-3 bg-warning bg-opacity-10 rounded h-100">
                                        <i class="fas fa-expand-arrows-alt fa-2x text-warning mb-2"></i>
                                        <h6>Scalability Model</h6>
                                        <small class="text-muted">Expand to Thembisa and other areas</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Success Metrics -->
                    <div class="col-12">
                        <div class="glass-card">
                            <h4 class="mb-4"><i class="fas fa-chart-line me-2"></i>Success Metrics (12-Month Targets)</h4>
                            <div class="chart-container">
                                <canvas id="successMetricsChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer animate-fade-in" style="animation-delay: 0.6s;">
            <p>Water Wise Comparative Analysis Dashboard | December 2025</p>
            <p class="small">Total Participants Analyzed: 360 | Soweto: 292 | Alexandra: 68 households</p>
            <div class="mt-3">
                <button class="btn btn-sm btn-outline-light me-2" onclick="window.print()">
                    <i class="fas fa-print me-1"></i>Print Report
                </button>
                <button class="btn btn-sm btn-outline-light" onclick="exportData()">
                    <i class="fas fa-download me-1"></i>Export Data
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Initialize all charts
        document.addEventListener('DOMContentLoaded', function() {
            initializeComparisonCharts();
            initializeSowetoCharts();
            initializeAlexandraCharts();
            initializeRecommendationCharts();
        });

        // Chart configuration
        const chartColors = {
            soweto: '#2c5aa0',
            alexandra: '#2e8b57',
            vibrant: ['#FF6B6B', '#4ECDC4', '#FFD166', '#06D6A0', '#118AB2', '#EF476F', '#073B4C'],
            gradientSoweto: ['#2c5aa0', '#3a6dc8'],
            gradientAlexandra: ['#2e8b57', '#3da56e']
        };

        function initializeComparisonCharts() {
            // Infrastructure Comparison Chart
            const infraCtx = document.getElementById('infrastructureComparisonChart').getContext('2d');
            new Chart(infraCtx, {
                type: 'bar',
                data: {
                    labels: ['Poor/Very Poor', 'Fair', 'Good', 'Missing'],
                    datasets: [{
                        label: 'Soweto',
                        data: [45, 21.4, 15, 18.6],
                        backgroundColor: chartColors.gradientSoweto[0],
                        borderColor: chartColors.gradientSoweto[1],
                        borderWidth: 2
                    }, {
                        label: 'Alexandra',
                        data: [68, 15, 10, 7],
                        backgroundColor: chartColors.gradientAlexandra[0],
                        borderColor: chartColors.gradientAlexandra[1],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: value => value + '%'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#fff'
                            }
                        }
                    }
                }
            });

            // Education Comparison Chart
            const eduCtx = document.getElementById('educationComparisonChart').getContext('2d');
            new Chart(eduCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Educated', 'Not Educated', 'Not Sure'],
                    datasets: [{
                        data: [55, 45, 0],
                        backgroundColor: [chartColors.vibrant[0], chartColors.vibrant[1], chartColors.vibrant[2]]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '60%',
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: '#fff'
                            }
                        }
                    }
                }
            });

            // Issues Comparison Chart
            const issuesCtx = document.getElementById('issuesComparisonChart').getContext('2d');
            new Chart(issuesCtx, {
                type: 'radar',
                data: {
                    labels: ['Communication', 'Meter Issues', 'Drainage', 'Sewer', 'Pollution', 'Education Gap'],
                    datasets: [{
                        label: 'Soweto',
                        data: [85, 40, 20, 15, 25, 45],
                        backgroundColor: chartColors.soweto + '40',
                        borderColor: chartColors.soweto,
                        borderWidth: 2,
                        pointBackgroundColor: chartColors.soweto
                    }, {
                        label: 'Alexandra',
                        data: [20, 25, 58, 52, 48, 68],
                        backgroundColor: chartColors.alexandra + '40',
                        borderColor: chartColors.alexandra,
                        borderWidth: 2,
                        pointBackgroundColor: chartColors.alexandra
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: value => value + '%'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            pointLabels: {
                                color: '#fff'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#fff'
                            }
                        }
                    }
                }
            });
        }

        function initializeSowetoCharts() {
            // Soweto Household Chart
            const householdCtx = document.getElementById('sowetoHouseholdChart').getContext('2d');
            new Chart(householdCtx, {
                type: 'pie',
                data: {
                    labels: ['6+ people', '1 person', '4-5 people', '2-3 people'],
                    datasets: [{
                        data: [33.5, 25, 25, 16.5],
                        backgroundColor: chartColors.vibrant,
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: '#fff'
                            }
                        }
                    }
                }
            });

            // Soweto Shortage Chart
            const shortageCtx = document.getElementById('sowetoShortageChart').getContext('2d');
            new Chart(shortageCtx, {
                type: 'bar',
                data: {
                    labels: ['Occasionally', 'Frequently', 'Rarely', 'Missing'],
                    datasets: [{
                        data: [66.7, 19, 2.4, 11.9],
                        backgroundColor: chartColors.vibrant,
                        borderRadius: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: value => value + '%'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        function initializeAlexandraCharts() {
            // Alexandra Infrastructure Chart
            const alexInfraCtx = document.getElementById('alexandraInfrastructureChart').getContext('2d');
            new Chart(alexInfraCtx, {
                type: 'polarArea',
                data: {
                    labels: ['Very Poor', 'Poor', 'Fair', 'Good', 'Excellent'],
                    datasets: [{
                        data: [45, 23, 15, 10, 7],
                        backgroundColor: chartColors.vibrant,
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: '#fff'
                            }
                        }
                    }
                }
            });

            // Alexandra Issues Chart
            const alexIssuesCtx = document.getElementById('alexandraIssuesChart').getContext('2d');
            new Chart(alexIssuesCtx, {
                type: 'bar',
                data: {
                    labels: ['Drainage Issues', 'Sewer Blockages', 'Pollution', 'Water Shedding', 'Infrastructure'],
                    datasets: [{
                        data: [58, 52, 48, 35, 68],
                        backgroundColor: chartColors.alexandra,
                        borderRadius: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: value => value + '%'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        function initializeRecommendationCharts() {
            // Success Metrics Chart
            const successCtx = document.getElementById('successMetricsChart').getContext('2d');
            new Chart(successCtx, {
                type: 'line',
                data: {
                    labels: ['Month 0', 'Month 3', 'Month 6', 'Month 9', 'Month 12'],
                    datasets: [{
                        label: 'Drainage Complaints',
                        data: [100, 80, 60, 45, 40],
                        borderColor: chartColors.vibrant[0],
                        backgroundColor: chartColors.vibrant[0] + '20',
                        tension: 0.3,
                        fill: true
                    }, {
                        label: 'Reporting Knowledge',
                        data: [38, 55, 70, 82, 90],
                        borderColor: chartColors.vibrant[1],
                        backgroundColor: chartColors.vibrant[1] + '20',
                        tension: 0.3,
                        fill: true
                    }, {
                        label: 'Conservation Adoption',
                        data: [25, 45, 65, 78, 85],
                        borderColor: chartColors.vibrant[2],
                        backgroundColor: chartColors.vibrant[2] + '20',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: value => value + '%'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#fff'
                            }
                        }
                    }
                }
            });
        }

        // Export data function
        function exportData() {
            const data = {
                comparison: {
                    infrastructure: {
                        soweto: [45, 21.4, 15, 18.6],
                        alexandra: [68, 15, 10, 7]
                    },
                    education: [55, 45, 0],
                    issues: {
                        soweto: [85, 40, 20, 15, 25, 45],
                        alexandra: [20, 25, 58, 52, 48, 68]
                    }
                },
                soweto: {
                    household: [33.5, 25, 25, 16.5],
                    shortage: [66.7, 19, 2.4, 11.9]
                },
                alexandra: {
                    infrastructure: [45, 23, 15, 10, 7],
                    issues: [58, 52, 48, 35, 68]
                }
            };

            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(data, null, 2));
            const downloadAnchor = document.createElement('a');
            downloadAnchor.setAttribute("href", dataStr);
            downloadAnchor.setAttribute("download", "waterwise_comparison_data.json");
            document.body.appendChild(downloadAnchor);
            downloadAnchor.click();
            downloadAnchor.remove();
            
            alert('Data exported successfully!');
        }

        // Animate progress bars on tab change
        document.querySelectorAll('button[data-bs-toggle="tab"]').forEach(tab => {
            tab.addEventListener('shown.bs.tab', function() {
                document.querySelectorAll('.progress-bar').forEach(bar => {
                    const width = bar.style.width;
                    bar.style.width = '0';
                    setTimeout(() => {
                        bar.style.width = width;
                    }, 100);
                });
            });
        });

        // Initialize tooltips
        const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        const tooltipList = tooltipTriggerList.map(function(tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
    </script>
</body>
</html>